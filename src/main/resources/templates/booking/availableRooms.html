<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Available Rooms</title>
</head>
<body>
    <h1>Available Rooms</h1>
        <form th:action="@{/booking/createReservation}" method="post">

        <div th:if="${error}">
            <p th:text="${error}"></p>
        </div>
        <div>
            <span th:text="${endDate}"></span>
            <span th:text="${startDate}"></span>
        </div>
        <div>
            <select name="userId" required>
                <option th:each="user : ${users}" th:value="${user.userId}" th:text="${user.userName}"></option>
            </select>
        </div>
        

        <div th:if="${rooms}">
            <table>
               

                <thead>
                    <tr>
                        <th>Select</th>
                        <th>Room Number</th>
                        <th>Price Per Night</th>
                        <th>Amenities</th>
                        <th>Hotel</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="room : ${rooms}">
                        <td><input type="checkbox" th:name="'selectedRooms'" th:value="${room.roomId}" /></td>
                        <td th:text="${room.roomNumber}"></td>
                        <td th:text="${room.pricePerNight}"></td>
                        <td th:text="${room.amenitiesDetails}"></td>
                        <td th:text="${room.hotel.hotelName}"></td>
                        <input name="hotelId" th:value="${room.hotel.hotelId}" />

                    </tr>
                </tbody>
            </table>
        </div>
        <div th:unless="${rooms}">
            <p>No rooms available for the selected dates.</p>
        </div>
        <input type="hidden" th:name="startDate" th:value="${startDate}" />
        <input type="hidden" th:name="endDate" th:value="${endDate}" />
        <button type="submit">Create Reservation</button>
    </form>
</body>
</html>
